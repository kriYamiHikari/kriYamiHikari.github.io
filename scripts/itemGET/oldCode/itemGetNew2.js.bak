let originItemLoadTxt=""
let itemMainRow=document.getElementById('itemMainRow-Media')
let btn1Test=document.getElementById('btn1')

let xmlHttp=new XMLHttpRequest()
let originTxtGet=new XMLHttpRequest()
let afterTxt=""

function originGet() { //获取样式源文件
    originTxtGet.onreadystatechange=function(){
        if (this.readyState===4 && this.status===200){
            originItemLoadTxt=this.responseText
            itemLoad()
        }
    }
    originTxtGet.open("get","itemLoadOrigin.html",true)
    originTxtGet.send()
}

function itemLoad(index){ //加载页面元素
    xmlHttp.onreadystatechange=function () {
        if (this.readyState===4 && this.status===200){
            let xmlDoc=this.responseXML
            let moduleItemMedia=xmlDoc.getElementsByTagName("moduleItem-Media")
            let test2=xmlDoc.getElementsByTagName("moduleItem-Media")[0].childNodes.length
            let test=xmlDoc.getElementsByTagName("moduleItem-Media")[0].childNodes[5].childNodes[9].childNodes[0].nodeValue

            let itemMax=xmlDoc.getElementsByTagName("item")
            let itemMaxNew=xmlDoc.getElementsByTagName("moduleItem-Media")[0].childNodes

            let itemHtmlSrc=xmlDoc.getElementsByTagName("htmlSrc")
            let itemImageSrc=xmlDoc.getElementsByTagName("imageSrc")
            let itemImageLeft=xmlDoc.getElementsByTagName("imageLeft")
            let itemTitle=xmlDoc.getElementsByTagName("title")
            let itemText=xmlDoc.getElementsByTagName("text")

            itemMainRow.innerHTML=""
            for (let i=1;i<itemMaxNew.length-1;i=i+2){
                //afterTxt=originItemLoadTxt.replace(/This is a test Text/,itemText[i].childNodes[0].nodeValue) //替换元素文本
                afterTxt=originItemLoadTxt.replace(/This is a test Text/,xmlDoc.getElementsByTagName("moduleItem-Media")[0].childNodes[i].childNodes[9].childNodes[0].nodeValue)
                /*afterTxt=afterTxt.replace(/This is a test Title/,itemTitle[i].childNodes[0].nodeValue) //替换元素标题
                afterTxt=afterTxt.replace(/images\/background\/03.jpg/,itemImageSrc[i].childNodes[0].nodeValue) //替换元素图片
                afterTxt=afterTxt.replace(/index\.html/g,itemHtmlSrc[i].childNodes[0].nodeValue) //替换元素跳转网页路径
                afterTxt=afterTxt.replace(/left: -20%/,"left: " + itemImageLeft[i].childNodes[0].nodeValue) //替换元素图片左偏移程度*/

                itemMainRow.innerHTML+=afterTxt
            }
            itemMainRow.innerHTML+=test
        }
    }
    xmlHttp.open("get","itemLoad.xml",true)
    xmlHttp.send()
}

originGet()